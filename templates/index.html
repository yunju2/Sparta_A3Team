<!doctype html>
<html lang="ko">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>

    <title>노래 일기장</title>

    <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap" rel="stylesheet">
        <nav class="navbar navbar-expand-lg navbar-light bg-light">

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
                <a class="nav-link" href="/">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/login">Sign In</a>
            </li>
            <li class="nav-item">
              <a class="nav-link disabled" href="/register">Sign Up</a>
            </li>
          </ul>
        </div>
      </nav>
    <style>
        * {
            list-style:none;
            font-family: 'Gowun Dodum', sans-serif;
        }
        .nav{
            margin:0 auto;
            color:white;
            width:100%;
            height:250px;
            background:linear-gradient(0deg, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)),url("https://cdn.pixabay.com/photo/2017/08/06/12/54/headphones-2592263_960_720.jpg");
            background-position: center;
            background-size: cover;
            position:relative;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .text{
            text-align:center;
        }
        h3{
            display:block;
            font-size:22px;
        }
        h4{
            display:block;
            font-size:16px;
        }
        .nav_bar{
            margin-right:90px;
        }
        .nav_bar button{
            width:30px;
            height:30px;
            margin-top:20px;
            margin-left:100px;
            box-shadow: none;
            border:none;
            background: transparent;
            text-decoration: none;
            cursor: pointer;
            transform:scale(3,3);
        }
        .nav_bar button:hover{
            transform:scale(3.2,3.2);
        }
        .nav_bar button span{

        }
        .mytitle {
            width: 100%;
            height: 250px;
            background-image: linear-gradient(0deg, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('https://movie-phinf.pstatic.net/20210715_95/1626338192428gTnJl_JPEG/movie_image.jpg');
            background-position: center;
            background-size: cover;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .write{
            width: 160px;
            height: 40px;
            background-color: transparent;
            color: white;
            border-radius: 50px;
            border: 1px solid white;
            margin-top: 30px;
        }
        .write:hover{
             border: 2px solid white;
        }
        .mytitle > button {
            width: 200px;
            height: 50px;
            background-color: transparent;
            color: white;
            border-radius: 50px;
            border: 1px solid white;
            margin-top: 10px;
        }

        .mytitle > button:hover {
            border: 2px solid white;
        }
        .mycomment {
            color: gray;
        }
        .mycards {
            margin: 20px auto 0px auto;
            width: 95%;
            max-width: 1200px;
        }

        .mypost {
            width: 95%;
            max-width: 500px;
            margin: 20px auto 0px auto;
            padding: 20px;
            box-shadow: 0px 0px 3px 0px gray;
            display:none;
        }

        .mybtns {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            margin-top: 20px;
        }

        .mybtns > button {
            margin-right: 10px;
        }
    </style>
    <script>
        function happy() {
            $('#cards-box').empty()
            $.ajax({
                type: 'GET',
                url: '/music/happy',
                data: {},
                success: function (response) {
                    rows = response['music_list']
                    for(i=0;i<rows.length;i++){
                        let title=rows[i]['title']
                        let comment=rows[i]['comment']
                        let view = rows[i]['view']
                        let cate =rows[i]['cate']
                        let embed =rows[i]['embed']
                        let temp_html = `<div class="col">
                                           <div class="card h-100">
                                            <iframe width="280" height="167.5" src="${embed}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                <div class="card-body">
                    <h5 class="card-title">${title}</h5>
                    <p><span>${view}</span><span>view</span></p>
                    <p>${cate}</p>
                    <p class="mycomment">${comment}</p>
                    </div>
            </div>
        </div>`
                        if(cate=='희'){
                            $('#cards-box').append(temp_html)
                        }else{
                            ''
                        }
                    }
                    }
                })
        }
        function angry() {
            $('#cards-box').empty()
            $.ajax({
                type: 'GET',
                url: '/music/angry',
                data: {},
                success: function (response) {
                    rows = response['music_list']
                    for(i=0;i<rows.length;i++){
                        let title=rows[i]['title']
                        let comment=rows[i]['comment']
                        let view = rows[i]['view']
                        let cate =rows[i]['cate']
                        let embed =rows[i]['embed']
                        let temp_html = `<div class="col">
                                           <div class="card h-100">
                                            <iframe width="280" height="167.5" src="${embed}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                <div class="card-body">
                    <h5 class="card-title">${title}</h5>
                    <p><span>${view}</span><span>view</span></p>
                    <p>${cate}</p>
                    <p class="mycomment">${comment}</p>
                    </div>
            </div>
        </div>`
                        if(cate=='노'){
                            $('#cards-box').append(temp_html)
                        }else{
                            ''
                        }
                    }
                    }
                })
        }
        function sad() {
            $('#cards-box').empty()
            $.ajax({
                type: 'GET',
                url: '/music/sad',
                data: {},
                success: function (response) {
                    rows = response['music_list']
                    for(i=0;i<rows.length;i++){
                        let title=rows[i]['title']
                        let comment=rows[i]['comment']
                        let view = rows[i]['view']
                        let cate =rows[i]['cate']
                        let embed =rows[i]['embed']
                        let temp_html = `<div class="col">
                                           <div class="card h-100">
                                            <iframe width="280" height="167.5" src="${embed}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                <div class="card-body">
                    <h5 class="card-title">${title}</h5>
                    <p><span>${view}</span><span>view</span></p>
                    <p>${cate}</p>
                    <p class="mycomment">${comment}</p>
                    </div>
            </div>
        </div>`
                        if(cate=='애'){
                            $('#cards-box').append(temp_html)
                        }else{
                            ''
                        }
                    }
                    }
                })
        }
        function fun() {
            $('#cards-box').empty()
            $.ajax({
                type: 'GET',
                url: '/music/fun',
                data: {},
                success: function (response) {
                    rows = response['music_list']
                    for(i=0;i<rows.length;i++){
                        let title=rows[i]['title']
                        let comment=rows[i]['comment']
                        let view = rows[i]['view']
                        let cate =rows[i]['cate']
                        let embed =rows[i]['embed']
                        let temp_html = `<div class="col">
                                           <div class="card h-100">
                                            <iframe width="280" height="167.5" src="${embed}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                <div class="card-body">
                    <h5 class="card-title">${title}</h5>
                    <p><span>${view}</span><span>view</span></p>
                    <p>${cate}</p>
                    <p class="mycomment">${comment}</p>
                    </div>
            </div>
        </div>`
                        if(cate=='락'){
                            $('#cards-box').append(temp_html)
                        }else{
                            ''
                        }


                    }

                    }
                })
        }

        // function listing() {
        //     $.ajax({
        //         type: 'GET',
        //         url: '/music',
        //         data: {},
        //         success: function (response) {
        //             rows = response['music_list']
        //             for(i=0;i<rows.length;i++){
        //                 let title=rows[i]['title']
        //                 let comment=rows[i]['comment']
        //                 let view = rows[i]['view']
        //                 let cate =rows[i]['cate']
        //                 let embed =rows[i]['embed']
        //                 let temp_html = `<div class="col">
        //                                    <div class="card h-100">
        //                                     <iframe width="280" height="167.5" src="${embed}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        //         <div class="card-body">
        //             <h5 class="card-title">${title}</h5>
        //             <p><span>${view}</span><span>view</span></p>
        //             <p>${cate}</p>
        //             <p class="mycomment">${comment}</p>
        //             </div>
        //     </div>
        // </div>`
        //                 $('#cards-box').append(temp_html)
        //
        //             }
        //
        //             }
        //
        //         })
        //     }
        function posting() {
            let url=$('#url').val()
            let comment=$('#comment').val()
            let cate=$('#cate').val()
            $.ajax({
                type: 'POST',
                url: '/music',
                data: {url_give:url,comment_give:comment,cate_give:cate},
                success: function (response) {
                    alert(response['msg'])
                    if(cate=='희'){
                        happy()
                    }else if(cate=='노'){
                        angry()
                    }else if(cate=='애'){
                        sad()
                    }else{
                        fun()
                    }
                    window.location.reload()
                }
            });
        }

        function open_box() {
            $('#post-box').show()
        }

        function close_box() {
            $('#post-box').hide()
        }
    </script>
</head>

<body>
<div class="nav">
    <div class="text">
        <h3>지금 당신의 기분은 어떠한가요?</h3>
        <h4>아래 이모티콘 중 하나를 클릭 해보세요</h4>
    </div>
    <div class="nav_bar" role="group" aria-label="...">
        <div class="btn-group" role="group">
            <button type="button" class="happy" onclick="happy()"><span>😀<span></button>
        </div>
        <div class="btn-group" role="group">
            <button type="button" class="angry" onclick="angry()"><span>😡<span></button>
        </div>
        <div class="btn-group" role="group">
            <button type="button" class="sad" onclick="sad()"><span>😭<span></button>
        </div>
        <div class="btn-group" role="group">
            <button type="button" class="fun" onclick="fun()"><span>😝<span></button>
        </div>
    </div>
    <button onclick="open_box()" class="write">음악 일기 쓰기</button>
</div>

<div class="mypost" id="post-box">
    <div class="form-floating mb-3">
        <input id="url" type="email" class="form-control" placeholder="name@example.com">
        <label>노래url</label>
    </div>
    <div class="input-group mb-3">
        <label class="input-group-text" for="inputGroupSelect01">별점</label>
        <select class="form-select" id="cate">
            <option selected>-- 선택하기 --</option>
            <option value="희">희</option>
            <option value="노">노</option>
            <option value="애">애</option>
            <option value="락">락</option>
        </select>
    </div>
    <div class="form-floating">
        <textarea id="comment" class="form-control" placeholder="Leave a comment here"></textarea>
        <label for="floatingTextarea2">코멘트</label>
    </div>
    <div class="mybtns">
        <button onclick="posting()" type="button" class="btn btn-dark">기록하기</button>
        <button onclick="close_box()" type="button" class="btn btn-outline-dark">닫기</button>
    </div>
</div>
<div class="mycards">
    <div class="row row-cols-1 row-cols-md-4 g-4" id="cards-box">
    </div>
</div>
</body>

</html>


